---
import BaseLayout from "../layouts/Base.astro";
import PostPreview from "@/components/blog/PostPreviewB";
import InformationPreview from "@/components/information/InformationPreview";
import SocialMediaLinks from "@/components/SocialMediaLinks";
import {
  getAllPosts,
  sortMDByDate,
  sortMDByPinned,
  getAllInfo,
  getMyInformation,
} from "@/utils";

const MAX_POSTS = 5;
const allPosts = await getAllPosts();
const allInfo = await getAllInfo();
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);
const allPostsByPinned = sortMDByPinned(allPostsByDate);
const allInformation = getMyInformation(allInfo);
---

<BaseLayout title="Home">
  <section>
    <h1 class="title">Hola Antigua</h1>
    <p class="mb-4 sm:mb-8">
      Esta p√°gina est√° dise√±ada para brindarte toda la informaci√≥n que necesitas
      sobre nuestra hermosa ciudad, con un enfoque especial en gastronom√≠a,
      eventos, turismo, y noticias importantes de la Municipalidad de La Antigua
      Guatemala. üèõÔ∏èüçΩÔ∏èüéâ
    </p>
    <p class="mb-4 sm:mb-8">
      Aunque somos un municipio peque√±o, Antigua ofrece una riqueza cultural y
      gastron√≥mica incre√≠ble. A veces sabemos qu√© queremos hacer o comer, pero
      no siempre sabemos a d√≥nde ir o qu√© opciones est√°n disponibles:
      restaurantes, sus ofertas, horarios, eventos... ¬°y mucho m√°s! üó∫Ô∏è
    </p>
    <p class="mb-4 sm:mb-8">
      Por eso hemos creado nuestro <span class="font-bold text-xl"
        >Bot Antig√ºe√±o ü§ñüì≤</span
      >, para que tengas toda la informaci√≥n al alcance de tu mano sin instalar
      ninguna aplicaci√≥n, en un solo lugar. Basta con enviar un mensaje por
      WhatsApp para resolver tus preguntas sobre gastronom√≠a, eventos y noticias
      relevantes de la ciudad.
    </p>
    <p class="mb-4 sm:mb-8">
      #AntiguaGuatemala #Gastronom√≠a #Eventos #Turismo #BotAntigueno
    </p>
    <div>
      <span>Puedes encontrarnos en: </span>
      <SocialMediaLinks />
    </div>
  </section>

  <section class="mt-8 sm:mt-16">
    <h2 class="title">Top 5 Posts</h2>
    <ul class="space-y-4 sm:space-y-2">
      {allPostsByPinned.map((p) => <PostPreview post={p} />)}
    </ul>
  </section>

  <section class="mt-16">
    <h2 class="title">Informaci√≥n general</h2>
    <ul class="space-y-4 sm:space-y-2">
      {allInformation.map((info) => <InformationPreview info={info} />)}
    </ul>
  </section>
</BaseLayout>
